============================= test session starts =============================
platform win32 -- Python 3.10.11, pytest-8.4.1, pluggy-1.6.0 -- C:\Users\kcjai\AppData\Local\Programs\Python\Python310\python.exe
cachedir: .pytest_cache
rootdir: D:\Projects\omnichannel-agentic-commerce\backend
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.3.0, cov-6.2.1
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/unit/test_guest_cart_transfer_on_login.py::test_guest_cart_is_attached_after_login WARNING: MongoClientManager is using a LOCALHOST URI: mongodb://localhost:27017/commerce_test
WARNING: RedisClientManager is using a LOCALHOST URL: redis://localhost:6379/1
FAILED
tests/unit/test_guest_cart_transfer_on_login.py::test_guest_cart_is_attached_after_login ERROR

=================================== ERRORS ====================================
________ ERROR at teardown of test_guest_cart_is_attached_after_login _________
tests\conftest.py:31: in init_test_services
    container.redis_manager.client.close()
E   AttributeError: '_FakeRedisClient' object has no attribute 'close'
================================== FAILURES ===================================
___________________ test_guest_cart_is_attached_after_login ___________________
D:\Projects\omnichannel-agentic-ai-commerce\backend\tests\unit\test_guest_cart_transfer_on_login.py:18: in test_guest_cart_is_attached_after_login
    ???
E   assert 404 == 201
E    +  where 404 = <Response [404 Not Found]>.status_code
=========================== short test summary info ===========================
FAILED tests/unit/test_guest_cart_transfer_on_login.py::test_guest_cart_is_attached_after_login
ERROR tests/unit/test_guest_cart_transfer_on_login.py::test_guest_cart_is_attached_after_login
========================= 1 failed, 1 error in 0.66s ==========================
