# ==============================================================================
# Omnichannel Agentic Commerce - Backend Configuration EXAMPLE
# ==============================================================================

# --- API CORE SETTINGS ---
APP_NAME="Omnichannel Agentic Commerce API"
API_PREFIX="/v1"

# --- AUTHENTICATION & SECURITY ---
# A strong secret key used for signing JWT access and refresh tokens.
TOKEN_SECRET=replace-with-a-64-character-random-hex-string
ACCESS_TOKEN_TTL_SECONDS=900
REFRESH_TOKEN_TTL_SECONDS=604800

# --- STOREFRONT SETTINGS ---
CART_TAX_RATE=0.08
DEFAULT_SHIPPING_FEE=5.99

# --- NETWORK & CORS ---
CORS_ORIGINS=http://localhost:5173

# --- DATABASE & PERSISTENCE ---
# MongoDB connection URI (e.g., mongodb://localhost:27017/commerce).
MONGODB_URI=mongodb://localhost:27017/commerce
# Redis connection URL for caching and state management.
REDIS_URL=redis://localhost:6379/0

# --- FEATURE FLAGS ---
ENABLE_EXTERNAL_SERVICES=true

# --- RATE LIMITING ---
RATE_LIMIT_ANONYMOUS_PER_MINUTE=120
RATE_LIMIT_AUTHENTICATED_PER_MINUTE=600
RATE_LIMIT_ADMIN_PER_MINUTE=2000

# --- SYSTEM CONSTRAINTS ---
REQUEST_MAX_BODY_BYTES=10485760
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAMESITE=lax
ENFORCE_JSON_CONTENT_TYPE=true
REJECT_DUPLICATE_CRITICAL_HEADERS=true

# --- ADMIN PROTECTION ---
# If enabled, admin logins require a 6-digit MFA (TOTP) code.
ADMIN_MFA_REQUIRED=false
# The static secret used to generate/verify MFA codes for the admin account.
ADMIN_MFA_STATIC_CODE=JBSWY3DPEHPK3PXP

# --- LLM & AI ORCHESTRATOR ---
LLM_ENABLED=false
LLM_PROVIDER=openrouter
LLM_MODEL=meta-llama/llama-3.1-8b-instruct:free
LLM_TIMEOUT_SECONDS=15
LLM_MAX_TOKENS=500
LLM_TEMPERATURE=0.1
LLM_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
LLM_CIRCUIT_BREAKER_TIMEOUT_SECONDS=60

# --- WEBSOCKETS (WS) ---
WS_HEARTBEAT_INTERVAL_SECONDS=25
WS_HEARTBEAT_TIMEOUT_SECONDS=70

# --- OPENROUTER CONFIGURATION ---
# Sign up at https://openrouter.ai/ for a free key.
OPENROUTER_API_KEY=""
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# --- VOICE & SUPPORT VENDOR (SUPERU) ---
SUPERU_ENABLED=false
SUPERU_API_URL=https://api.superu.ai
SUPERU_API_KEY=""
SUPERU_ASSISTANT_ID=""
SUPERU_FROM_PHONE_NUMBER=""
SUPERU_WEBHOOK_SECRET=""
SUPERU_WEBHOOK_TOLERANCE_SECONDS=300

# --- VOICE RECOVERY SYSTEM ---
VOICE_RECOVERY_SCHEDULER_ENABLED=false
VOICE_RECOVERY_SCAN_INTERVAL_SECONDS=30
VOICE_ABANDONMENT_MINUTES=30
VOICE_MAX_ATTEMPTS_PER_CART=3
VOICE_MAX_CALLS_PER_USER_PER_DAY=2
VOICE_MAX_CALLS_PER_DAY=300
VOICE_DAILY_BUDGET_USD=300
VOICE_ESTIMATED_COST_PER_CALL_USD=0.7
VOICE_QUIET_HOURS_START=21  # UTC 24h format
VOICE_QUIET_HOURS_END=8     # UTC 24h format
VOICE_RETRY_BACKOFF_SECONDS_CSV=60,300,900
VOICE_SCRIPT_VERSION=v1
VOICE_SCRIPT_TEMPLATE="Hi {name}, you still have {item_count} item(s) in your cart worth ${cart_total:.2f}. Would you like help checking out?"
VOICE_GLOBAL_KILL_SWITCH=false
VOICE_DEFAULT_TIMEZONE=UTC

# --- OBSERVABILITY & ALERTS ---
VOICE_ALERT_BACKLOG_THRESHOLD=50
VOICE_ALERT_FAILURE_RATIO_THRESHOLD=0.35
